<?xml version='1.0' encoding='utf-8'?>
<!-- #################################################################################################################### -->
<!-- #   WARNING: Do not edit this file.                                                                                # -->
<!-- #   Instead, edit the bonita.xml template located in the folder setup/tomcat-templates.                        # -->
<!-- #   During start-bonita script execution, the template will overwrite this file.                                   # -->
<!-- #################################################################################################################### -->

<Context>

    <!--  To not persist the session after reboot tomcat -->
    <Manager pathname="" />

    <!-- ##################################################### -->
    <!-- Configure Datasource for Bonita standard database -->
    <!-- ##################################################### -->

    <!-- H2 Example -->
    <Resource name="RawBonitaDS"
              auth="Container"
              type="org.h2.jdbcx.JdbcDataSource"
              factory="org.h2.jdbcx.JdbcDataSourceFactory"
              description="Raw Bonita Datasource"
              user="sa"
              password=""
              loginTimeout="0"
              url="jdbc:h2:file:${org.bonitasoft.h2.database.dir}/bonita_journal.db;MVCC=TRUE;DB_CLOSE_ON_EXIT=FALSE;IGNORECASE=TRUE;AUTO_SERVER=TRUE;" />

    <Resource name="bonitaSequenceManagerDS"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
              maxTotal="5"
              minIdle="1"
              maxIdle="5"
              maxWaitMillis="10000"
              initialSize="1"
              removeAbandonedOnBorrow="true"
              removeAbandonedOnMaintenance="true"
              logAbandoned="false"
              testOnBorrow="true"
              timeBetweenEvictionRunsMillis="60000"
              minEvictableIdleTimeMillis="600000"
              validationQuery="SELECT 1"
              username="sa"
              password=""
              driverClassName="org.h2.Driver"
              url="jdbc:h2:file:${org.bonitasoft.h2.database.dir}/bonita_journal.db;MVCC=TRUE;DB_CLOSE_ON_EXIT=FALSE;IGNORECASE=TRUE;AUTO_SERVER=TRUE;" />

    <!-- Postgresql Example -->
    <!--
    <Resource name="RawBonitaDS"
              auth="Container"
              type="org.postgresql.xa.PGXADataSource"
              factory="org.postgresql.xa.PGXADataSourceFactory"
              description="Raw Bonita Datasource"
              closeMethod="close"
              user="bonita"
              password="bpm"
              serverName="localhost"
              portNumber="5432"
              databaseName="bonita" />

    <Resource name="bonitaSequenceManagerDS"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
              maxTotal="5"
              minIdle="1"
              maxIdle="5"
              maxWaitMillis="10000"
              initialSize="1"
              testOnBorrow="true"
              validationQuery="SELECT 1"
              validationInterval="30000"
              removeAbandonedOnBorrow="true"
              removeAbandonedOnMaintenance="true"
              logAbandoned="false"
              timeBetweenEvictionRunsMillis="60000"
              minEvictableIdleTimeMillis="600000"
              username="bonita"
              password="bpm"
              driverClassName="org.postgresql.Driver"
              url="jdbc:postgresql://localhost:5432/bonita"/>
    -->

    <!-- Oracle Example -->
    <!--
    <Resource name="RawBonitaDS"
              auth="Container"
              type="oracle.jdbc.xa.client.OracleXADataSource"
              factory="oracle.jdbc.pool.OracleDataSourceFactory"
              description="Raw Bonita Datasource"
              closeMethod="close"
              user="bonita"
              password="bpm"
              url="jdbc:oracle:thin:@localhost:1521:XE" />

    <Resource name="bonitaSequenceManagerDS"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
              maxTotal="5"
              minIdle="1"
              maxIdle="5"
              maxWaitMillis="10000"
              initialSize="1"
              removeAbandonedOnBorrow="true"
              removeAbandonedOnMaintenance="true"
              logAbandoned="false"
              testOnBorrow="true"
              timeBetweenEvictionRunsMillis="60000"
              minEvictableIdleTimeMillis="600000"
              validationQuery="SELECT 1 FROM DUAL"
              username="bonita"
              password="bpm"
              driverClassName="oracle.jdbc.OracleDriver"
              url="jdbc:oracle:thin:@localhost:1521:XE"/>
    -->

    <!-- SQL Server Example -->
    <!--
    <Resource name="RawBonitaDS"
              auth="Container"
              class="com.microsoft.sqlserver.jdbc.SQLServerXADataSource"
              factory="com.microsoft.sqlserver.jdbc.SQLServerDataSourceObjectFactory"
              description="Raw Bonita Datasource"
              closeMethod="close"
              user="bonita"
              password="bpm"
              url="jdbc:sqlserver://localhost:1433;database=journal" />

    <Resource name="bonitaSequenceManagerDS"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
              maxTotal="5"
              minIdle="1"
              maxIdle="5"
              maxWaitMillis="10000"
              initialSize="1"
              removeAbandonedOnBorrow="true"
              removeAbandonedOnMaintenance="true"
              logAbandoned="false"
              testOnBorrow="true"
              timeBetweenEvictionRunsMillis="60000"
              minEvictableIdleTimeMillis="600000"
              validationQuery="SELECT 1"
              username="bonita"
              password="bpm"
              driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
              url="jdbc:sqlserver://localhost:1433;database=journal"/>
    -->

    <!-- MySQL Example -->
    <!--
    <Resource name="RawBonitaDS"
              auth="Container"
              type="com.mysql.jdbc.jdbc2.optional.MysqlXADataSource"
              factory="com.mysql.jdbc.jdbc2.optional.MysqlDataSourceFactory"
              description="Raw Bonita Datasource"
              closeMethod="close"
              serverName="localhost"
              port="3306"
              databaseName="bonita"
              user="bonita"
              password="bpm"
              explicitUrl="true"
              url="jdbc:mysql://localhost:3306/bonita?dontTrackOpenResources=true&amp;useUnicode=true&amp;characterEncoding=UTF-8" />

    <Resource name="bonitaSequenceManagerDS"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
              maxTotal="5"
              minIdle="1"
              maxIdle="5"
              maxWaitMillis="10000"
              initialSize="1"
              removeAbandonedOnBorrow="true"
              removeAbandonedOnMaintenance="true"
              logAbandoned="false"
              testOnBorrow="true"
              timeBetweenEvictionRunsMillis="60000"
              minEvictableIdleTimeMillis="600000"
              validationQuery="SELECT 1"
              username="bonita"
              password="bpm"
              driverClassName="com.mysql.jdbc.Driver"
              url="jdbc:mysql://localhost:3306/bonita?dontTrackOpenResources=true&amp;useUnicode=true&amp;characterEncoding=UTF-8"/>
    -->

    <!-- ##################################################### -->
    <!-- Configure Business Data Datasource -->
    <!-- ##################################################### -->

    <!-- H2 Example -->
    <Resource name="RawBusinessDataDS"
              auth="Container"
              type="org.h2.jdbcx.JdbcDataSource"
              factory="org.h2.jdbcx.JdbcDataSourceFactory"
              description="Raw Bonita Business Data Datasource"
              user="sa"
              password=""
              loginTimeout="0"
              url="jdbc:h2:file:${org.bonitasoft.h2.database.dir}/business_data.db;MVCC=TRUE;DB_CLOSE_ON_EXIT=FALSE;IGNORECASE=TRUE;AUTO_SERVER=TRUE;" />

    <Resource name="NotManagedBizDataDS"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
              maxTotal="5"
              minIdle="1"
              maxIdle="5"
              maxWaitMillis="10000"
              initialSize="1"
              removeAbandonedOnBorrow="true"
              removeAbandonedOnMaintenance="true"
              logAbandoned="false"
              testOnBorrow="true"
              timeBetweenEvictionRunsMillis="60000"
              minEvictableIdleTimeMillis="600000"
              validationQuery="SELECT 1"
              username="sa"
              password=""
              driverClassName="org.h2.Driver"
              url="jdbc:h2:file:${org.bonitasoft.h2.database.dir}/business_data.db;MVCC=TRUE;DB_CLOSE_ON_EXIT=FALSE;IGNORECASE=TRUE;AUTO_SERVER=TRUE;" />

    <!-- Postgresql Example -->
    <!--
    <Resource name="RawBusinessDataDS"
              auth="Container"
              type="org.postgresql.xa.PGXADataSource"
              factory="org.postgresql.xa.PGXADataSourceFactory"
              description="Raw Bonita Business Data Datasource"
              closeMethod="close"
              user="bonita"
              password="bpm"
              serverName="localhost"
              portNumber="5432"
              databaseName="business_data" />

    <Resource name="NotManagedBizDataDS"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
              maxTotal="5"
              minIdle="1"
              maxIdle="5"
              maxWaitMillis="10000"
              initialSize="1"
              removeAbandonedOnBorrow="true"
              removeAbandonedOnMaintenance="true"
              logAbandoned="false"
              testOnBorrow="true"
              timeBetweenEvictionRunsMillis="60000"
              minEvictableIdleTimeMillis="600000"
              validationQuery="SELECT 1"
              username="bonita"
              password="bpm"
              driverClassName="org.postgresql.Driver"
              url="jdbc:postgresql://localhost:5432/business_data"/>
    -->

    <!-- Oracle Example -->
    <!--
    <Resource name="RawBusinessDataDS"
              auth="Container"
              type="oracle.jdbc.xa.client.OracleXADataSource"
              factory="oracle.jdbc.pool.OracleDataSourceFactory"
              description="Raw Bonita Business Data Datasource"
              closeMethod="close"
              user="business_data"
              password="bpm"
              url="jdbc:oracle:thin:@localhost:1521:XE" />

    <Resource name="NotManagedBizDataDS"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
              maxTotal="5"
              minIdle="1"
              maxIdle="5"
              maxWaitMillis="10000"
              initialSize="1"
              removeAbandonedOnBorrow="true"
              removeAbandonedOnMaintenance="true"
              logAbandoned="false"
              testOnBorrow="true"
              timeBetweenEvictionRunsMillis="60000"
              minEvictableIdleTimeMillis="600000"
              validationQuery="SELECT 1 FROM DUAL"
              username="business_data"
              password="bpm"
              driverClassName="oracle.jdbc.OracleDriver"
              url="jdbc:oracle:thin:@localhost:1521:XE"/>
    -->

    <!-- SQL Server Example -->
    <!--

    <Resource name="RawBusinessDataDS"
              auth="Container"
              class="com.microsoft.sqlserver.jdbc.SQLServerXADataSource"
              factory="com.microsoft.sqlserver.jdbc.SQLServerDataSourceObjectFactory"
              description="Raw Bonita Business Data Datasource"
              closeMethod="close"
              user="bonita"
              password="bpm"
              url="jdbc:sqlserver://localhost:1433;database=business_data" />

    <Resource name="NotManagedBizDataDS"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
              maxTotal="5"
              minIdle="1"
              maxIdle="5"
              maxWaitMillis="10000"
              initialSize="1"
              removeAbandonedOnBorrow="true"
              removeAbandonedOnMaintenance="true"
              logAbandoned="false"
              testOnBorrow="true"
              timeBetweenEvictionRunsMillis="60000"
              minEvictableIdleTimeMillis="600000"
              validationQuery="SELECT 1"
              username="bonita"
              password="bpm"
              driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
              url="jdbc:sqlserver://localhost:1433;database=business_data"/>
    -->

    <!-- MySQL Example -->
    <!--
    <Resource name="RawBusinessDataDS"
              auth="Container"
              type="com.mysql.jdbc.jdbc2.optional.MysqlXADataSource"
              factory="com.mysql.jdbc.jdbc2.optional.MysqlDataSourceFactory"
              description="Raw Bonita Business Data Datasource"
              closeMethod="close"
              serverName="localhost"
              port="3306"
              databaseName="business_data"
              user="bonita"
              password="bpm"
              explicitUrl="true"
              url="jdbc:mysql://localhost:3306/business_data?dontTrackOpenResources=true&amp;useUnicode=true&amp;characterEncoding=UTF-8" />

    <Resource name="NotManagedBizDataDS"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
              maxTotal="5"
              minIdle="1"
              maxIdle="5"
              maxWaitMillis="10000"
              initialSize="1"
              removeAbandonedOnBorrow="true"
              removeAbandonedOnMaintenance="true"
              logAbandoned="false"
              testOnBorrow="true"
              timeBetweenEvictionRunsMillis="60000"
              minEvictableIdleTimeMillis="600000"
              validationQuery="SELECT 1"
              username="bonita"
              password="bpm"
              driverClassName="com.mysql.jdbc.Driver"
              url="jdbc:mysql://localhost:3306/business_data?dontTrackOpenResources=true&amp;useUnicode=true&amp;characterEncoding=UTF-8"/>
    -->


    <Resource
            name="bonitaDS"
            uniqueName="jdbc/bonitaDSXA"
            auth="Container"
            factory="org.jboss.narayana.tomcat.jta.TransactionalDataSourceFactory"
            transactionManager="TransactionManager"
            type="javax.sql.XADataSource"
            initialSize="8"
            maxTotal="50"
            minIdle="8"
            maxIdle="16"
            defaultAutoCommit="false"
            removeAbandonedOnBorrow="true"
            removeAbandonedOnMaintenance="true"
            logAbandoned="false"
            testOnBorrow="true"
            timeBetweenEvictionRunsMillis="60000"
            minEvictableIdleTimeMillis="600000"
            xaDataSource="RawBonitaDS" />

    <Resource
            name="BusinessDataDS"
            uniqueName="jdbc/BusinessDataDSXA"
            auth="Container"
            factory="org.jboss.narayana.tomcat.jta.TransactionalDataSourceFactory"
            transactionManager="TransactionManager"
            type="javax.sql.XADataSource"
            initialSize="8"
            maxTotal="50"
            minIdle="8"
            maxIdle="16"
            defaultAutoCommit="false"
            removeAbandonedOnBorrow="true"
            removeAbandonedOnMaintenance="true"
            logAbandoned="false"
            testOnBorrow="true"
            timeBetweenEvictionRunsMillis="60000"
            minEvictableIdleTimeMillis="600000"
            xaDataSource="RawBusinessDataDS" />

</Context>
